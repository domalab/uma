{"openapi":"3.1.1","info":{"title":"UMA API","description":"Unraid Management Agent API for system monitoring, Docker container management, VM control, and storage management","version":"unknown","contact":{"name":"UMA Development Team","url":"https://github.com/domalab/uma","email":"support@domalab.net"}},"servers":[{"url":"http://your-unraid-server:34600","description":"Local UMA API server"},{"url":"unix:/var/run/uma-api.sock","description":"Unix socket API server"}],"paths":{"/api/v1/docker/containers":{"get":{"description":"Returns a list of Docker containers with optional pagination support","parameters":[{"description":"Include stopped containers","in":"query","name":"all","required":false,"schema":{"default":false,"type":"boolean"}},{"description":"Page number for pagination (enables paginated response)","in":"query","name":"page","required":false,"schema":{"default":1,"minimum":1,"type":"integer"}},{"description":"Number of items per page (enables paginated response)","in":"query","name":"limit","required":false,"schema":{"default":50,"maximum":1000,"minimum":1,"type":"integer"}},{"description":"Optional request ID for tracing","in":"header","name":"X-Request-ID","required":false,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/StandardResponse"},{"properties":{"data":{"items":{"description":"Docker container information","type":"object"},"type":"array"}}}],"description":"Paginated response (when page or limit parameters are provided)"},{"description":"Legacy response format (when no pagination parameters)","items":{"description":"Docker container information","type":"object"},"type":"array"}]}}},"description":"Containers retrieved successfully"},"500":{"$ref":"#/components/responses/InternalServerError"}},"summary":"List Docker containers","tags":["Docker"]}},"/api/v1/docker/containers/bulk/start":{"post":{"description":"Starts multiple Docker containers in a single bulk operation","requestBody":{"content":{"application/json":{"schema":{"properties":{"container_ids":{"description":"Array of container IDs or names to start","example":["plex","nginx","sonarr"],"items":{"type":"string"},"maxItems":50,"minItems":1,"type":"array"}},"required":["container_ids"],"type":"object"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkOperationResponse"}}},"description":"Bulk operation completed (may include partial failures)"}},"summary":"Start multiple Docker containers","tags":["Docker","Bulk Operations"]}},"/api/v1/health":{"get":{"description":"Returns comprehensive health information including dependency status, system metrics, and performance data","parameters":[{"description":"Optional request ID for tracing","in":"header","name":"X-Request-ID","required":false,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}},"description":"Health status retrieved successfully"},"500":{"$ref":"#/components/responses/InternalServerError"}},"summary":"Get system health status","tags":["Health"]}},"/api/v1/storage/disks":{"get":{"description":"Returns comprehensive disk information including SMART health data, with optional pagination support","parameters":[{"description":"Page number for pagination (enables paginated response with flattened disk list)","in":"query","name":"page","required":false,"schema":{"default":1,"minimum":1,"type":"integer"}},{"description":"Number of disks per page (enables paginated response)","in":"query","name":"limit","required":false,"schema":{"default":10,"maximum":100,"minimum":1,"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/StandardResponse","description":"Paginated response (when page or limit parameters are provided)"},{"description":"Structured response format (when no pagination parameters)","properties":{"array_disks":{"description":"Array member disks","type":"array"},"boot_disk":{"description":"Boot disk information","type":"object"},"cache_disks":{"description":"Cache pool disks","type":"array"},"summary":{"description":"Disk summary statistics","type":"object"}},"type":"object"}]}}},"description":"Disk information retrieved successfully"}},"summary":"Get consolidated disk information","tags":["Storage"]}},"/api/v1/ws/docker/events":{"get":{"description":"WebSocket endpoint for real-time Docker container events (start, stop, restart, health changes)","responses":{"101":{"description":"WebSocket connection established"}},"summary":"Real-time Docker events WebSocket","tags":["WebSocket","Docker"]}},"/api/v1/ws/storage/status":{"get":{"description":"WebSocket endpoint for real-time storage array status updates (disk health, SMART alerts, array status changes)","responses":{"101":{"description":"WebSocket connection established"}},"summary":"Real-time storage status WebSocket","tags":["WebSocket","Storage"]}},"/api/v1/ws/system/stats":{"get":{"description":"WebSocket endpoint for real-time system statistics including CPU, memory, and uptime","responses":{"101":{"description":"WebSocket connection established"}},"summary":"Real-time system statistics WebSocket","tags":["WebSocket","System"]}}},"components":{"schemas":{"BulkOperationResponse":{"properties":{"operation":{"description":"The bulk operation performed","enum":["start","stop","restart"],"examples":["start","stop","restart"],"type":"string"},"results":{"description":"Results for each container operation","items":{"$ref":"#/components/schemas/ContainerOperationResult"},"type":"array"},"summary":{"$ref":"#/components/schemas/BulkOperationSummary"}},"type":"object"},"BulkOperationSummary":{"properties":{"failed":{"description":"Number of failed operations","examples":[0,1,2],"minimum":0,"type":"integer"},"succeeded":{"description":"Number of successful operations","examples":[0,1,2,3],"minimum":0,"type":"integer"},"total":{"description":"Total number of containers processed","examples":[1,2,3,5],"minimum":0,"type":"integer"}},"type":"object"},"ContainerOperationResult":{"properties":{"container_id":{"description":"Container ID or name","examples":["plex","nginx","sonarr"],"type":"string"},"container_name":{"description":"Container name","examples":["plex","nginx","sonarr"],"type":"string"},"duration":{"description":"Operation duration","examples":["43.658896ms","337.794446ms","1.234s"],"type":"string"},"error":{"description":"Error message if operation failed","examples":["Container not found","Failed to start container","Operation timeout"],"type":"string"},"success":{"description":"Whether the operation succeeded","examples":[true,false],"type":"boolean"}},"type":"object"},"DiskInfo":{"properties":{"device":{"description":"Device path","example":"/dev/sdc","type":"string"},"health":{"description":"Disk health status","enum":["healthy","warning","critical","unknown"],"examples":["healthy","warning"],"type":"string"},"name":{"description":"Disk name","example":"disk0","type":"string"},"role":{"description":"Disk role in the array","enum":["array","parity","cache","boot"],"examples":["array","parity","cache"],"type":"string"},"size":{"description":"Disk size in bytes","example":16000900608000,"type":"integer"},"size_formatted":{"description":"Human-readable disk size","example":"14.6 TB","type":"string"},"smart_data":{"description":"SMART health data","properties":{"attributes":{"description":"SMART attribute details","items":{"properties":{"id":{"type":"integer"},"name":{"type":"string"},"raw_value":{"type":"integer"},"value":{"type":"integer"}},"type":"object"},"type":"array"},"overall_health":{"description":"Overall SMART health status","example":"PASSED","type":"string"},"power_on_hours":{"description":"Total power-on hours","example":37556,"type":"integer"},"temperature":{"description":"SMART temperature reading","example":33,"type":"integer"}},"type":"object"},"status":{"description":"Disk operational status","enum":["online","offline","disabled","error"],"examples":["online","offline"],"type":"string"},"temperature":{"description":"Disk temperature in Celsius","example":33,"type":"integer"}},"type":"object"},"HealthResponse":{"properties":{"checks":{"properties":{"response_time_ms":{"description":"Health check response time in milliseconds","example":150,"type":"integer"}},"type":"object"},"dependencies":{"properties":{"docker":{"description":"Docker daemon health status","enum":["healthy","unhealthy","unavailable"],"examples":["healthy","unhealthy"],"type":"string"},"libvirt":{"description":"Libvirt service health status","enum":["healthy","unhealthy","unavailable"],"examples":["healthy","unavailable"],"type":"string"},"notifications":{"description":"Notification system health status","enum":["healthy","unhealthy","unavailable"],"examples":["healthy"],"type":"string"},"storage":{"description":"Storage system health status","enum":["healthy","unhealthy","unavailable"],"examples":["healthy"],"type":"string"}},"type":"object"},"metrics":{"properties":{"api_calls_total":{"description":"Total API calls processed","example":1234,"type":"integer"},"cpu_usage_percent":{"description":"CPU usage percentage","example":23.5,"type":"number"},"memory_usage_percent":{"description":"Memory usage percentage","example":45.2,"type":"number"},"uptime_seconds":{"description":"System uptime in seconds","example":86400,"type":"integer"}},"type":"object"},"service":{"const":"uma","description":"Service name","type":"string"},"status":{"description":"Overall health status","enum":["healthy","degraded","unhealthy"],"examples":["healthy","degraded"],"type":"string"},"timestamp":{"description":"Health check timestamp","format":"date-time","type":"string"},"version":{"description":"UMA version","examples":["1.0.0","1.1.0"],"type":"string"}},"type":"object"},"PaginationInfo":{"properties":{"has_more":{"description":"Whether there are more pages available","example":true,"type":"boolean"},"page":{"description":"Current page number","example":1,"type":"integer"},"per_page":{"description":"Number of items per page","example":50,"type":"integer"},"total":{"description":"Total number of items","example":150,"type":"integer"},"total_pages":{"description":"Total number of pages","example":3,"type":"integer"}},"type":"object"},"ResponseMeta":{"properties":{"request_id":{"description":"Unique request identifier for tracing","example":"req_1234567890_5678","type":"string"},"timestamp":{"description":"Response timestamp in ISO 8601 format","example":"2025-06-15T21:30:42Z","format":"date-time","type":"string"},"version":{"description":"API version","example":"1.0.0","type":"string"}},"type":"object"},"StandardResponse":{"properties":{"data":{"description":"The response data"},"meta":{"$ref":"#/components/schemas/ResponseMeta"},"pagination":{"$ref":"#/components/schemas/PaginationInfo"}},"type":"object"}},"responses":{"BadRequest":{"content":{"application/json":{"schema":{"properties":{"error":{"description":"Error message","type":"string"}},"type":"object"}}},"description":"Bad Request"},"InternalServerError":{"content":{"application/json":{"schema":{"properties":{"error":{"description":"Error message","type":"string"}},"type":"object"}}},"description":"Internal Server Error"}}}}
